version: v2
teleport:
  nodename: teleport-server
  data_dir: /var/lib/teleport
  log:
    output: stderr
    severity: INFO
    format:
      output: text
  ca_pin: []
  diag_addr: ""
auth_service:
  enabled: "yes"
  listen_addr: 0.0.0.0:3025
  cluster_name: teleport_with_vagrant_libvirt
  proxy_listener_mode: multiplex
  authentication:
    second_factor: off
  tokens:
    - "node:very_insecure_token_that_should_not_be_used"
ssh_service:
  enabled: "yes"
  labels:
    env: example
    type: server
  commands:
  - name: hostname
    command: [hostname]
    period: 1m0s
  - name: operating_system
    command: ["bash", "-c", "awk -F'=' '/^PRETTY/ {print $2}' /etc/os-release"]
    period: 30m
proxy_service:
  enabled: "yes"
  web_listen_addr: 0.0.0.0:443
  public_addr: {{ ansible_default_ipv4.address|default(ansible_all_ipv4_addresses[0]) }}:443
  https_keypairs:
  - key_file: /etc/pki/tls/private/teleport-server.key
    cert_file: /etc/pki/tls/private/teleport-server.crt
  acme: {}
